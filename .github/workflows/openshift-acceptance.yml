# Consul acceptance tests running against OpenShift cluster
name: OpenShift Acceptance Tests

on:
  push:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Install CLI tools from OpenShift Mirror
        uses: redhat-actions/openshift-tools-installer@v1.13.1
        with:
          # "mirror" is the default source, so this is optional.
          source: "mirror"

          crc: "latest"

          # Installs the latest release of oc with the major version 3.
          # This is equivalent to "3.x" or "^3".
          oc: "latest"
      - name: Configure CRC
        run: |
          crc config set skip-check-root-user true
          crc config set kubeadmin-password citest
          crc setup
          crc start

#    runs-on: custom-linux-xl
#    steps:
#


#
#      - name: Setup CRC
#        run: |
#          crc setup
#
#      - name: Start CRC
#        run: |
#          crc start
#
#      - name: Login to CRC
#        run: |
#          crc oc-env
#          oc login -u developer https://api.crc.testing:6443
